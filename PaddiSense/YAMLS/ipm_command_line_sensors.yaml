# /config/PaddiSense/YAMLS/ipm_command_line_sensors.yaml
# Command Line integration (modern format)
# Creates: sensor.ipm_inventory_products

command_line:
  - sensor:
      name: ipm_inventory_products
      unique_id: ipm_inventory_products

      # IMPORTANT: use single quotes as per HA docs
      command: 'python3 /config/PaddiSense/Python/ipm_read_v2.py'

      # If your JSON ever grows, give it more time
      command_timeout: 30

      scan_interval: 300

      # Provide a real state so it never shows "unknown"
      value_template: '{{ value_json.total_products | default(0) }}'

      # Promote these JSON keys to attributes
      json_attributes:
        - products
        - product_keys
        - locations
