button_card_templates:
  template_timer_on_off:
    state:
      - value: 'off'
        color: rgb(255,0, 0)
        icon: mdi:timer-off
      - value: 'on'
        color: rgb(0,255,0)
        icon: mdi:clock-start
    color_type: card
    styles:
      card:
        - height: 100px
      icon:
        - height: 30px
        - width: 30px
      name:
        - font-size: 12px
    tap_action:
      action: toggle
    hold_action:
      action: more-info
    show_name: true
    show_icon: true
    show_state: false
    show_label: true
    size: 30%
  template_wifi_access_points:
    variables:
      var_entity: entity.name
      var_name: Access Point Name
    name: '[[[ return variables var.name]]]'
    color_type: card
    state:
      - value: Adoption Failed
        color: rgb(255,0,0)
        icon: mdi:wifi-alert
      - value: Disconnected
        color: rgb(255,0,0)
        icon: mdi:wifi-alert
      - value: connected
        color: rgb(0,255,0)
        icon: mdi:wifi
      - value: Isolated
        color: rgb(255, 255, 0)
        icon: mdi:wifi-alert
    action: more-info
    styles:
      card:
        - height: 100px
      icon:
        - height: 50px
        - width: 50px
      name:
        - font-size: 16px
    tap_action:
      action: toggle
    hold_action:
      action: more-info
    show_name: true
    show_icon: true
    show_state: false
    show_label: true
    size: 30%
    label: |
      [[[
         var name = entity.entity_id
         if (states[name].state === "Adoption Failed")
         return "Maintenance Required";
         if (states[name].state === "Disconnected")
         return "Maintenance Required";
         if (states[name].state === "Isolated")
         return "Maintenance Required";
         else if (states[name].state === "connected")
         return "OK";
       ]]]
  template_switch_on_off:
    variables:
      var_entity: entity.name
      var_name: LocationName
    label: |
      [[[
      var name = entity.entity_id
      if (states[name].state === "on")
      return "On";
      else if (states[name].state === "off")
      return "Off";
      ]]]
    state:
      - value: 'off'
        color: rgb(255,0, 0)
        icon: mdi:engine-off
      - value: 'on'
        color: rgb(0,255,0)
        icon: mdi:engine
    color_type: card
    styles:
      card:
        - height: 100px
      icon:
        - height: 30px
        - width: 30px
      name:
        - font-size: 12px
    tap_action:
      action: toggle
    hold_action:
      action: more-info
    show_name: true
    show_icon: true
    show_state: false
    show_label: true
    size: 30%
  template_titleblock:
    variables:
      var_name: Name
    color_type: label-card
    color: rgb(200,250, 55)
    name: '[[[return variables.var_name]]]'
    styles:
      card:
        - height: 20px
  template_textblock:
    variables:
      var_name: Name
    color_type: label-card
    color: rgb(162, 55, 250)
    name: '[[[return variables.var_name]]]'
    styles:
      card:
        - height: 20px
  template_buttoncard_openclose:
    variables:
      var_name: LocationName
    label: |
      [[[
        const entity_id = entity.entity_id;
        const stateObj = states[entity_id];
        if (!stateObj) {
          return "Entity not found";
        }

        switch (stateObj.state) {
          case "Open":
            return "Open";
          case "Close":
            return "Closed";
          case "HoldOne":
          case "HoldTwo":
            return "Hold Position";
          default:
            return "Current State: " + stateObj.state;
        }
      ]]]
    tap_action:
      action: call-service
      service: input_select.select_next
      service_data:
        entity_id: '[[[ return entity.entity_id ]]]'
    data:
      cycle: true
    state:
      - value: Close
        color: rgb(255, 0, 0)
        icon: mdi:arrow-collapse-down
      - value: Open
        color: rgb(50, 100, 230)
        icon: mdi:door-open
      - value: HoldOne
        color: rgb(128, 128, 128)
        icon: mdi:pause
      - value: HoldTwo
        color: rgb(128, 128, 128)
        icon: mdi:pause
    color_type: card
    styles:
      card:
        - height: 120px
      icon:
        - height: 50px
        - width: 50px
      name:
        - font-size: 18px
    show_name: true
    show_icon: true
    show_state: false
    show_label: true
  template_channel_autostate:
    variables:
      var_name: LocationName
    label: |
      [[[
        const entity_id = entity.entity_id;
        const stateObj = states[entity_id];
        if (!stateObj) {
          return "Entity not found";
        }

        switch (stateObj.state) {
          case "Fill Dam":
            return "Fill Dam";
          case "Fill Wetlands":
            return "Fill Wetlands";
          case "Manual":
            return "Manual";
          case "Auto":
            return "Auto";
          case "No Demand":
            return "No Demand";
          case "Low Demand":
            return "Low Demand";
          case "High Demand":
            return "High Demand";
          default:
            return "Current State: " + stateObj.state;
        }
      ]]]
    tap_action:
      action: call-service
      service: input_select.select_next
      service_data:
        entity_id: '[[[ return entity.entity_id ]]]'
    data:
      cycle: true
    state:
      - value: Manual
        color: rgb(255, 0, 0)
        icon: mdi:pause
      - value: Auto
        color: rgb(0, 255, 0)
        icon: mdi:door-open
      - value: Fill Dam
        color: rgb(255, 255,0)
        icon: mdi:door-open
      - value: Fill Wetlands
        color: rgb(255, 255,0)
        icon: mdi:door-open
      - value: Low Demand
        color: rgb(255, 155,0)
        icon: mdi:door-open
      - value: High Demand
        color: rgb(155, 155,0)
        icon: mdi:door-open
      - value: No Demand
        color: rgb(255,0,0)
        icon: mdi:door-open
    color_type: card
    styles:
      card:
        - height: 120px
      icon:
        - height: 50px
        - width: 50px
      name:
        - font-size: 18px
    show_name: true
    show_icon: true
    show_state: false
    show_label: true
  template_inputselect_automationstate:
    variables:
      var_name: LocationName
    label: |
      [[[
        var entity_id = entity.entity_id;  // Access the entity ID
        if (!states[entity_id]) {
          return "Entity not found";  // Handle missing entity
        }
        return "\n" + states[entity_id].state;  // Add a blank line before the state
      ]]]
    tap_action:
      action: call-service
      service: input_select.select_next
      service_data:
        entity_id: '[[[ return entity.entity_id ]]]'
    data:
      cycle: true
    state:
      - value: 'Off'
        color: rgb(128,128,128)
        icon: mdi:autorenew-off
      - value: Flush Bays
        color: rgb(8,105,158)
        icon: mdi:auto-mode
      - value: Maintain Bays
        color: rgb(29,171,222)
        icon: mdi:auto-mode
      - value: Drain Bays
        color: rgb(222,171,29)
        icon: mdi:auto-download
    color_type: card
    styles:
      icon:
        - height: 50px
        - width: 50px
      name:
        - font-size: 16px
        - white-space: normal
        - text-align: center
      state:
        - margin-top: 10px
        - text-align: center
      card:
        - height: 120px
    show_name: true
    show_icon: true
    show_state: true
    show_label: false
views:
  - title: Overview
    path: supply-channel
    cards:
      - type: picture-elements
        image: /api/image/serve/77918f0b3f01642895ea46de414c20ef/512x512
        elements:
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.ward_pit_depth_adjusted
            style:
              top: 15%
              left: 69%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              '--label-badge-background-color': '#2196F3'
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.recycle_pit_depth_adjusted
            style:
              top: 41%
              left: 5%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              '--label-badge-background-color': '#2196F3'
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.mc_section_7_depth_adjusted
            style:
              top: 26%
              left: 30%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.mc_section_5_depth_adjusted
            style:
              top: 38%
              left: 30%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.mc_section_3_depth_adjusted
            style:
              top: 49%
              left: 35%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.mc_section_2_depth_adjusted
            style:
              top: 54%
              left: 18%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              transform: scale(0.8)
          - type: state-badge
            tap_action:
              action: more-info
            entity: sensor.mc_section_1_depth_adjusted
            style:
              top: 65%
              left: 3%
              '--ha-label-badge-title-font-size': 0em
              '--paper-font-subhead_-_font-size': 8px
              transform: scale(0.8)
          - type: conditional
            conditions:
              - entity: input_boolean.recyclepump_status_on_off
                state: 'on'
            elements:
              - type: state-icon
                entity: input_boolean.recyclepump_status_on_off
                icon: mdi:water-pump
                state_color: null
                style:
                  top: 51%
                  left: 5%
                  transform: scale(.8,.8)
                  background: Yellow
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(255,0,0)
            title: Recycle On
          - type: conditional
            conditions:
              - entity: input_boolean.recyclepump_status_on_off
                state: 'off'
            elements:
              - type: state-icon
                entity: input_boolean.recyclepump_status_on_off
                icon: mdi:water-pump-off
                state_color: null
                style:
                  top: 51%
                  left: 5%
                  transform: scale(.8,.8)
                  background: white
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(255,0,0)
            title: Recycle Off
          - type: conditional
            conditions:
              - entity: input_boolean.mainpump_status_on_off
                state: 'on'
            elements:
              - type: state-icon
                entity: input_boolean.mainpump_status_on_off
                icon: mdi:water-pump
                state_color: null
                style:
                  top: 85%
                  left: 1%
                  transform: scale(.8,.8)
                  background: Yellow
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(255,0,255)
            title: Main Pump Icon
          - type: conditional
            conditions:
              - entity: input_boolean.mainpump_status_on_off
                state: 'off'
            elements:
              - type: state-icon
                entity: input_boolean.mainpump_status_on_off
                icon: mdi:water-pump-off
                state_color: null
                style:
                  top: 85%
                  left: 1%
                  transform: scale(.8,.8)
                  background: white
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(255,0,0)
            title: Main Pump Icon
          - type: conditional
            conditions:
              - entity: input_boolean.wardpump_status_on_off
                state: 'on'
            elements:
              - type: state-icon
                entity: input_boolean.wardpump_status_on_off
                icon: mdi:water-pump
                state_color: null
                style:
                  top: 9%
                  left: 79%
                  transform: scale(.8,.8)
                  background: Yellow
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(0,0,255)
            title: Ward Pump Icon
          - type: conditional
            conditions:
              - entity: input_boolean.wardpump_status_on_off
                state: 'off'
            elements:
              - type: state-icon
                entity: input_boolean.wardpump_status_on_off
                icon: mdi:water-pump-off
                state_color: null
                style:
                  top: 9%
                  left: 79%
                  transform: scale(.8,.8)
                  background: white
                  padding: 5px 5px 5px 5px
                  border-radius: 50%
                  '--paper-item-icon-color': rgba(255,0,0)
            title: Ward Pump Icon
      - type: custom:restriction-card
        restrictions:
          confirm: true
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: Pump Status
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_boolean.mainpump_status_on_off
                  template: template_switch_on_off
                  name: Main Pump
                - type: custom:button-card
                  entity: input_boolean.recyclepump_status_on_off
                  template: template_switch_on_off
                  name: Recycle Pump
                - type: custom:button-card
                  entity: input_boolean.wardpump_status_on_off
                  template: template_switch_on_off
                  name: Ward Pump
            - type: vertical-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: MAIN CHANNEL GATES
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_boolean.mainpump_automation_demand
                  template: template_switch_on_off
                  name: Auto-demand Main Pump
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_buttoncard_openclose
                  entity: input_select.mainchannel_01_actuator_state
                  name: MC 1
                - type: custom:button-card
                  template: template_channel_autostate
                  entity: input_select.mc_01_automation_state
                  name: MC 1 Automation
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_buttoncard_openclose
                  entity: input_select.mainchannel_02_actuator_state
                  name: MC 2
                - type: custom:button-card
                  template: template_channel_autostate
                  entity: input_select.mc_02_automation_state
                  name: MC 2 Automation
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_buttoncard_openclose
                  entity: input_select.mainchannel_03_actuator_state
                  name: MC 3
                - type: custom:button-card
                  template: template_channel_autostate
                  entity: input_select.mc_03_automation_state
                  name: MC 3 Automation
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_buttoncard_openclose
                  entity: input_select.mainchannel_05_actuator_state
                  name: MC 5
                - type: custom:button-card
                  template: template_channel_autostate
                  entity: input_select.mc_05_automation_state
                  name: MC 5 Automation
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_buttoncard_openclose
                  entity: input_select.mainchannel_07_actuator_state
                  name: MC 7
                - type: custom:button-card
                  template: template_channel_autostate
                  entity: input_select.mc_07_automation_state
                  name: MC 7 Automation
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: Main Pump
    path: main-pump
    badges: []
    cards:
      - type: custom:restriction-card
        restrictions:
          confirm: true
          block: null
          exemptions: null
          duration: 300
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: template_titleblock
              name: Pin Code = 1234
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: Main Pump Status
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_boolean.mainpump_status_on_off
                  template: template_switch_on_off
                  name: Main Pump
      - type: vertical-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.mainpump_automation_countdown
            fill_container: true
            primary_info: name
            name: Set Timer Clock for Shutdown
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:timer-outline
          - type: custom:mushroom-entity-card
            fill_container: true
            primary_info: name
            name: Schedule Main Pump Start Time
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:calendar-clock
            entity: input_boolean.mainpump_scheduled_starttime
          - type: custom:mushroom-entity-card
            entity: input_boolean.mainpump_automation_demand
            fill_container: true
            primary_info: name
            name: Auto Demand Pumping
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:clock-outline
            layout: horizontal
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.mainpump_automation_countdown
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:flipdown-timer-card
              entity: timer.mainpump_timer_countdown
              name: Countdown For Main Pump
              show_hour: true
              show_title: true
              show_header: true
              theme: hass
              localize:
                button: start, stop, cancle, resume, reset
                header: Hours, Minutes
              styles:
                rotor:
                  width: 50px
                  height: 120px
                  fontsize: 4rem
                button:
                  width: 100px
                  height: 60px
                  fontsize: 1.5em
                  location: bottom
              show_error: false
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.mainpump_scheduled_starttime
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: template_titleblock
              name: Main Pump Scheduled Start Time
            - type: custom:button-card
              entity: input_datetime.mainpump_schedule_start
              name: Next Scheduled Start Time
              state_color: false
              show_name: true
              show_icon: false
              show_state: true
              show_label: true
              styles:
                card:
                  - height: 120px
                icon:
                  - height: 50px
                  - width: 50px
                name:
                  - font-size: 18px
                  - color: rgb(255, 28, 21)
      - show_name: true
        show_icon: true
        type: button
        tap_action:
          action: navigate
          navigation_path: /pump-channels/mainpump-additional
        icon: mdi:plus-circle
        hold_action:
          action: none
        name: Main Pump  Config & Extra
        icon_height: 80px
      - show_name: true
        show_icon: true
        type: button
        entity: input_boolean.mainpump_cleaning_on_off
        name: Clean Cycle On/Off
        icon: mdi:cannabis
        show_state: true
        tap_action:
          action: toggle
        icon_height: 60px
        theme: Caule Light Rose
      - type: gauge
        entity: input_number.mainpump_total_runnng_hours
        name: Total Hours of Operation
        unit: hr
      - type: gauge
        entity: sensor.pump_main_pump_main_supply_pit_depth
        needle: true
        severity:
          green: 140
          yellow: 120
          red: 90
        max: 160
        min: 90
        unit: cm
        name: Supply Pit Depth
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: 4bf5ee3dd5394225985b42ce00519673
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: MainPump-Additional
    path: mainpump-additional
    subview: true
    cards:
      - type: custom:apexcharts-card
        header:
          show: true
          title: Main Pump – Hours This Week
        graph_span: 7d
        span:
          start: week
        apex_config:
          chart:
            height: 260
          dataLabels:
            enabled: false
          legend:
            show: false
        series:
          - entity: sensor.main_pump_hours_daily
            name: Hours / day
            type: column
            group_by:
              func: max
              duration: 1d
        yaxis:
          - min: 0
            decimals: 1
      - type: custom:mushroom-entity-card
        entity: sensor.main_pump_hours_yearly
        name: Main Pump Hours (YTD)
        icon: mdi:pump
        primary_info: state
        secondary_info: name
      - type: logbook
        title: Main Pump Log
        hours_to_show: 48
        target:
          entity_id:
            - switch.pump_main_pump_main_pump_on_off
    type: masonry
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: Recycle Pump
    path: recycle-pump
    cards:
      - type: custom:restriction-card
        restrictions:
          confirm: true
          block: null
        exemptions: null
        duration: 300
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: Recycle Pump Status
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_boolean.recyclepump_status_on_off
                  template: template_switch_on_off
                  name: Recycle Pump
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_textblock
                  name: Accessories
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: switch.recyclepump_camera
                  template: template_switch_on_off
                  name: Recycle Camera
                - type: custom:button-card
                  entity: switch.pump_recycle_flashing_light
                  template: template_switch_on_off
                  name: Flashing Light
      - type: vertical-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.recyclepump_automation_countdown
            fill_container: true
            primary_info: name
            name: Set Timer Clock for Shutdown
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:timer-outline
            hold_action:
              action: none
            double_tap_action:
              action: none
          - type: custom:mushroom-entity-card
            fill_container: true
            primary_info: name
            name: Schedule Recycle Pump Start Time
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:calendar-clock
            entity: input_boolean.recyclepump_scheduled_starttime
            hold_action:
              action: none
            double_tap_action:
              action: none
      - type: vertical-stack
        cards:
          - type: gauge
            entity: input_number.recyclepump_fuelgauge
            needle: true
            min: 0
            max: 1000
            segments:
              - from: 0
                color: '#db4437'
              - from: 100
                color: '#ffa600'
              - from: 600
                color: '#43a047'
          - type: entities
            entities:
              - entity: sensor.fuel_remaining_hh_mm
                name: Time Remaining
            state_color: true
            title: Run Time Available
          - type: custom:mod-card
            style:
              hui-horizontal-stack-card$: |
                hui-entities-card {
                    width: 75%;
                    flex: auto !important;
                  }
                  button-card {
                    flex: auto !important;
                  }
            card:
              type: horizontal-stack
              cards:
                - type: entities
                  entities:
                    - entity: input_number.recyclepump_fuelrefill
                      icon: mdi:gas-station-in-use-outline
                      name: Amount
                - type: custom:button-card
                  name: Refuel
                  icon: mdi:fuel
                  size: 60px
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    service_data:
                      entity_id: script.recycle_pump_refuel
        title: Fuel Remaining
      - type: vertical-stack
        cards:
          - type: gauge
            entity: sensor.recycle_pit_depth_adjusted
            needle: true
            min: 0
            max: 300
            segments:
              - from: 0
                color: '#db4437'
              - from: 10
                color: '#43a047'
              - from: 70
                color: '#ffa600'
              - from: 150
                color: '#db4437'
            name: Recycle Pit Depth
            unit: cm
            severity:
              green: 0
              yellow: 0
              red: 0
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.recyclepump_automation_countdown
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:flipdown-timer-card
              entity: timer.recyclepump_timer_countdown
              name: Countdown For Recycle Pump
              show_hour: true
              show_title: true
              show_header: true
              theme: hass
              localize:
                button: start, stop, cancle, resume, reset
                header: Hours, Minutes
              styles:
                rotor:
                  width: 50px
                  height: 120px
                  fontsize: 4rem
                button:
                  width: 100px
                  height: 60px
                  fontsize: 1.5em
                  location: bottom
              show_error: false
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.recyclepump_scheduled_starttime
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: template_titleblock
              name: Recycle Pump Scheduled Start Time
            - type: custom:button-card
              entity: input_datetime.recyclepump_schedule_start
              name: Next Scheduled Start Time
              state_color: false
              show_name: true
              show_icon: false
              show_state: true
              show_label: true
              styles:
                card:
                  - height: 120px
                icon:
                  - height: 50px
                  - width: 50px
                name:
                  - font-size: 18px
                  - color: rgb(255, 28, 21)
      - show_name: true
        show_icon: true
        type: button
        tap_action:
          action: navigate
          navigation_path: /pump-channels/recyclepump-additional
        icon: mdi:plus-circle
        hold_action:
          action: none
        icon_height: 80px
        name: Service & Config
    visible:
      - user: 4bf5ee3dd5394225985b42ce00519673
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: RecyclePump-additional
    path: recyclepump-additional
    cards:
      - type: custom:restriction-card
        restrictions:
          confirm: true
          block: null
        exemptions: null
        duration: 300
        card:
          type: vertical-stack
          cards:
            - type: custom:circular-timer-card
              entity: timer.recyclepump_timer_service
              name: Service Timer
              bins: 50
              show_seconds: false
              color:
                - red
                - yellow
                - lightgreen
                - green
            - type: button
              name: Reset Service Timer
              icon: mdi:backup-restore
              icon_height: 50px
              tap_action:
                action: call-service
                service: script.recycle_pump_reset_service_timer
      - type: entity
        entity: input_number.recyclepump_service_timer_backup
      - type: vertical-stack
        cards:
          - type: gauge
            entity: input_number.recyclepump_fuel_total
            needle: true
            min: 0
            max: 10000
            name: Total Fuel for Finacial Year
            unit: L
            severity:
              green: 2000
              yellow: 4000
              red: 6000
            tap_action:
              action: none
      - type: logbook
        title: Recycle Pump Log Book
        hours_to_show: 48
        target:
          entity_id:
            - input_boolean.recyclepump_status_on_off
      - type: history-graph
        entities:
          - entity: input_boolean.recyclepump_status_on_off
            name: Pump State
        title: Recycle Pump Hours
    subview: true
    type: masonry
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: 4bf5ee3dd5394225985b42ce00519673
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: Ward Pump
    path: ward-pump
    cards:
      - type: custom:restriction-card
        restrictions:
          pin:
            code: 1234
          block: null
        exemptions: null
        duration: 300
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: template_titleblock
              name: Pin Code = 1234
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: Ward Pump Status
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_boolean.wardpump_status_on_off
                  template: template_switch_on_off
                  name: Ward Pump
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  template: template_titleblock
                  name: Accessories
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: switch.pump_ward_camera
                  template: template_switch_on_off
                  name: Camera
                - type: custom:button-card
                  entity: switch.pump_ward_flashing_light
                  template: template_switch_on_off
                  name: Work Light
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  entity: input_select.ward_pump_demand_level
                  template: template_channel_autostate
                  name: Ward Pump Demand Level
      - type: vertical-stack
        cards:
          - type: gauge
            entity: sensor.ward_pit_depth_adjusted
            needle: true
            min: 0
            max: 200
            segments:
              - from: 0
                color: '#db4437'
              - from: 10
                color: '#43a047'
              - from: 70
                color: '#ffa600'
              - from: 150
                color: '#db4437'
            name: Ward Pit Depth
            unit: cm
      - type: vertical-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.wardpump_automation_countdown
            fill_container: true
            primary_info: name
            name: Set Timer Clock for Shutdown
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:timer-outline
            hold_action:
              action: none
            double_tap_action:
              action: none
          - type: custom:mushroom-entity-card
            fill_container: true
            primary_info: name
            name: Schedule Ward Pump Start Time
            icon_color: green
            secondary_info: state
            icon_type: icon
            tap_action:
              action: toggle
            icon: mdi:calendar-clock
            entity: input_boolean.wardpump_scheduled_starttime
            hold_action:
              action: none
            double_tap_action:
              action: none
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.wardpump_automation_countdown
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:flipdown-timer-card
              entity: timer.wardpump_timer_countdown
              name: Countdown For Ward Pump
              show_hour: true
              show_title: true
              show_header: true
              theme: hass
              localize:
                button: start, stop, cancle, resume, reset
                header: Hours, Minutes
              styles:
                rotor:
                  width: 50px
                  height: 120px
                  fontsize: 4rem
                button:
                  width: 100px
                  height: 60px
                  fontsize: 1.5em
                  location: bottom
              show_error: false
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.wardpump_scheduled_starttime
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: template_titleblock
              name: Ward Pump Scheduled Start Time
            - type: custom:button-card
              entity: input_datetime.wardpump_schedule_start
              name: Next Scheduled Start Time
              state_color: false
              show_name: true
              show_icon: false
              show_state: true
              show_label: true
              styles:
                card:
                  - height: 120px
                icon:
                  - height: 50px
                  - width: 50px
                name:
                  - font-size: 18px
                  - color: rgb(255, 28, 21)
      - show_name: true
        show_icon: true
        type: button
        tap_action:
          action: navigate
          navigation_path: /pump-channels/wardpump-additional
        icon: mdi:plus-circle
        hold_action:
          action: none
        icon_height: 80px
        name: More Info & Service Details
      - type: vertical-stack
        cards:
          - type: gauge
            entity: input_number.wardpump_fuelgauge
            needle: true
            min: 0
            max: 1000
            segments:
              - from: 0
                color: '#db4437'
              - from: 100
                color: '#ffa600'
              - from: 600
                color: '#43a047'
          - type: custom:mod-card
            style:
              hui-horizontal-stack-card$: |
                hui-entities-card {
                    width: 75%;
                    flex: auto !important;
                  }
                  button-card {
                    flex: auto !important;
                  }
            card:
              type: horizontal-stack
              cards:
                - type: entities
                  entities:
                    - entity: input_number.wardpump_fuelrefill
                      icon: mdi:gas-station-in-use-outline
                      name: Amount
                - type: custom:button-card
                  name: Refuel
                  icon: mdi:fuel
                  size: 60px
                  tap_action:
                    action: call-service
                    service: automation.trigger
                    service_data:
                      entity_id: automation.refuel_ward_pump
    visible:
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - title: WardPump-additional
    path: wardpump-additional
    cards:
      - type: custom:restriction-card
        restrictions:
          confirm: true
          block: null
        exemptions: null
        duration: 300
        card:
          type: vertical-stack
          cards:
            - type: custom:circular-timer-card
              entity: timer.wardpump_timer_service
              name: Service Timer
              bins: 50
              show_seconds: false
              color:
                - red
                - yellow
                - lightgreen
                - green
            - type: button
              name: Reset Service Timer
              icon: mdi:backup-restore
              icon_height: 50px
              tap_action:
                action: call-service
                service: script.ward_pump_reset_service_timer
      - type: vertical-stack
        cards:
          - type: gauge
            entity: input_number.wardpump_fuel_total
            needle: true
            min: 0
            max: 10000
            name: Total Fuel for Finacial Year
            unit: L
            severity:
              green: 2000
              yellow: 4000
              red: 6000
            tap_action:
              action: none
      - type: logbook
        title: Ward Pump Log Book
        hours_to_show: 48
        target:
          entity_id:
            - input_boolean.wardpump_status_on_off
      - type: history-graph
        entities:
          - entity: input_boolean.wardpump_status_on_off
            name: Pump State
        title: Ward Pump Hours
      - type: custom:apexcharts-card
        header:
          show: true
          title: Ward Pump – Hours This Week
        graph_span: 7d
        span:
          start: week
        apex_config:
          chart:
            height: 260
          dataLabels:
            enabled: false
          legend:
            show: false
        series:
          - entity: sensor.ward_pump_hours_daily
            name: Hours / day
            type: column
            group_by:
              func: max
              duration: 1d
        yaxis:
          - min: 0
            decimals: 1
      - type: custom:mushroom-entity-card
        entity: sensor.ward_pump_hours_yearly
        name: Ward Pump Hours (YTD)
        icon: mdi:pump
        primary_info: state
        secondary_info: name
    subview: true
    type: masonry
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: 4bf5ee3dd5394225985b42ce00519673
      - user: cbff2ae980fa4702be672ef1bb5e44ad
  - type: sections
    max_columns: 4
    title: Channels Config
    path: channels-config
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template: template_titleblock
                name: Channel Depth Offsets
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.recyclepump_5mwater_offset
                    name: Recycle Pit Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: Recycle Pit Adjusted
                    secondary: >
                      {{ states('sensor.recycle_pit_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.mainchannel_01_depth1_offset
                    name: MC-01 Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: MC-01 Depth
                    secondary: >
                      {{ states('sensor.mc_section_1_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.mainchannel_02_depth1_offset
                    name: MC-02 Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: MC-02 Depth
                    secondary: >
                      {{ states('sensor.mc_section_2_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.mainchannel_03_depth1_offset
                    name: MC-03 Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: MC-03 Depth
                    secondary: >
                      {{ states('sensor.mc_section_3_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.mainchannel_05_depth1_offset
                    name: MC-05 Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: MC-05 Depth
                    secondary: >
                      {{ states('sensor.mc_section_5_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-number-card
                    entity: input_number.mainchannel_07_depth1_offset
                    name: MC-07 Depth Offset
                    layout: vertical
                    display_mode: buttons
                  - type: custom:mushroom-template-card
                    primary: MC-07 Depth
                    secondary: >
                      {{ states('sensor.mc_section_7_depth_adjusted') | float(0)
                      | round(2) }} m
                    icon: mdi:water
                    layout: vertical
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template: template_titleblock
                name: Open/Close Timer Config
              - type: custom:mushroom-title-card
                title: MC-01
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_01_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_01_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_01_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_01_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.mainchannel_01_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: SW4 Spur
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.sw4_spur_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.sw4_spur_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.sw4_spur_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.sw4_spur_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.sw4_spur_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: MC-02
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_02_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_02_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_02_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_02_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.mainchannel_02_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: MC-03
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_03_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_03_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_03_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_03_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.mainchannel_03_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: MC-05
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_05_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_05_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_05_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_05_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.mainchannel_05_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: MC-07
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_07_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_07_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.mainchannel_07_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.mainchannel_07_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.mainchannel_07_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
              - type: custom:mushroom-title-card
                title: W-17 Spur
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.rb_002_flag_use_time_open
                        name: Use Open Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.rb_002_duration_open_sec
                        name: Open Timer Duration
                        layout: vertical
                        display_mode: buttons
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        entity: input_boolean.rb_002_flag_use_time_close
                        name: Use Close Timer
                        template: template_timer_on_off
                      - type: custom:mushroom-number-card
                        entity: input_number.rb_002_duration_close_sec
                        name: Close Timer Duration
                        layout: vertical
                        display_mode: buttons
              - type: custom:mushroom-number-card
                entity: input_number.rb_002_duration_full_close_sec
                name: Max Duration
                layout: vertical
                display_mode: buttons
    visible:
      - user: 61623853e7294d7e9d25da6f3655df64
      - user: 3c3b8622f8214a8690cd346ea12fd76d
      - user: 978d36a2ba4d4ca8b79033ee81a57f88
      - user: cbff2ae980fa4702be672ef1bb5e44ad
    cards: []
